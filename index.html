<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile R Code and Visualize with Pprof • proffer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Profile R Code and Visualize with Pprof">
<meta property="og:description" content="Like similar profiling tools,
  the proffer package automatically detects
  sources of slowness in R code.
  The distinguishing feature of proffer is its utilization of
  pprof, which supplies interactive visualizations
  that are efficient and easy to interpret.
  Behind the scenes, the profile package converts
  native Rprof() data to a protocol buffer
  that pprof understands.
  For the documentation of proffer,
  visit &lt;https://r-prof.github.io/proffer/&gt;.
  To learn about the implementations and methodologies of
  pprof, profile, and protocol buffers,
  visit &lt;https://github.com/google/pprof&gt;.
  &lt;https://developers.google.com/protocol-buffers&gt;,
  and &lt;https://github.com/r-prof/profile&gt;, respectively.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">proffer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-prof/proffer/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="proffer-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#proffer-" class="anchor" aria-hidden="true"></a>proffer <img src="https://r-prof.github.io/proffer/reference/figures/logo.png" align="right" alt="logo" width="120" height="139" style="border: none; float: right;">
</h1></div>

<p>The <code>proffer</code> package profiles R code to find bottlenecks. Visit <a href="https://r-prof.github.io/proffer" class="external-link uri">https://r-prof.github.io/proffer</a> for documentation. <a href="https://r-prof.github.io/proffer/reference/index.html" class="external-link uri">https://r-prof.github.io/proffer/reference/index.html</a> has a complete list of available functions in the package.</p>
<div id="why-use-a-profiler" class="section level2">
<h2 class="hasAnchor">
<a href="#why-use-a-profiler" class="anchor" aria-hidden="true"></a>Why use a profiler?</h2>
<p>This data processing code is slow.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e5</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
  <span class="va">x</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt;   user  system elapsed </span>
<span class="co">#&gt; 82.060  28.440 110.582 </span></code></pre></div>
<p>Why exactly does it take so long? Is it because <code>for</code> loops are slow as a general rule? Let us find out empirically.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-prof/proffer" class="external-link">proffer</a></span><span class="op">)</span>
<span class="va">px</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pprof.html">pprof</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e5</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
  <span class="va">x</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; ● url: http://localhost:57517</span>
<span class="co">#&gt; ● host: localhost</span>
<span class="co">#&gt; ● port: 57517</span></code></pre></div>
<p>When we navigate to <code>http://localhost:64610</code> and look at the flame graph, we see <code>[&lt;-.data.frame()</code> (i.e. <code>x[i, ] &lt;- x[i, ] + 1</code>) is taking most of the runtime.</p>
<center>
<p><a href="https://r-prof.github.io/proffer/reference/figures/flame.png" class="external-link"> <img src="https://r-prof.github.io/proffer/reference/figures/flame.png" alt="top" align="center" style="border: none; float: center;"></a></p>
</center>
<p>So we refactor the code to avoid data frame row assignment. Much faster, even with a <code>for</code> loop!</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e5</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>
  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
    <span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   0.052   0.003   0.056</span></code></pre></div>
<p>Moral of the story: before you optimize, throw away your assumptions and run your code through a profiler. That way, you can spend your time optimizing where it counts!</p>
</div>
<div id="managing-the-pprof-server" class="section level2">
<h2 class="hasAnchor">
<a href="#managing-the-pprof-server" class="anchor" aria-hidden="true"></a>Managing the pprof server</h2>
<p>The <code>pprof</code> server is a background <a href="https://github.com/r-lib/processx" class="external-link"><code>processx</code></a> process, and you can manage it with the <code>processx</code> methods <a href="https://processx.r-lib.org/#managing-external-processes" class="external-link">described here</a>. Remember to terminate the process with <code>$kill()</code> when you are done with it.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># px is a process handler.</span>
<span class="va">px</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pprof.html">pprof</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e4</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
  <span class="va">x</span>
<span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; ● url: http://localhost:50195</span>
<span class="co">#&gt; ● host: localhost</span>
<span class="co">#&gt; ● port: 50195</span>

<span class="co"># Summary of the background process.</span>
<span class="va">px</span>
<span class="co">#&gt; PROCESS 'pprof', running, pid 10451.</span>

<span class="va">px</span><span class="op">$</span><span class="fu">is_alive</span><span class="op">(</span><span class="op">)</span>
<span class="co"># [1] TRUE</span>

<span class="co"># Error messages, some of which do not matter.</span>
<span class="va">px</span><span class="op">$</span><span class="fu">read_error</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "Main binary filename not available.\n"</span>

<span class="co"># Terminate the process when you are done.</span>
<span class="va">px</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="serving-pprof-remotely" class="section level2">
<h2 class="hasAnchor">
<a href="#serving-pprof-remotely" class="anchor" aria-hidden="true"></a>Serving pprof remotely</h2>
<p>As with Jupyter notebooks, you can serve <code>pprof</code> from one computer and use it from another computer on the same network. On the server, you must</p>
<ol style="list-style-type: decimal">
<li>Find the server’s host name or IP address in advance.</li>
<li>Supply <code>"0.0.0.0"</code> as the <code>host</code> argument.</li>
</ol>
<!-- end list --><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system2.html" class="external-link">system2</a></span><span class="op">(</span><span class="st">"hostname"</span><span class="op">)</span>
<span class="co">#&gt; mycomputer</span>

<span class="va">px</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pprof.html">pprof</a></span><span class="op">(</span><span class="op">{</span>
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e4</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
  <span class="va">x</span>
<span class="op">}</span>, host <span class="op">=</span> <span class="st">"0.0.0.0"</span><span class="op">)</span>
<span class="co">#&gt; ● url: http://localhost:610712</span>
<span class="co">#&gt; ● host: localhost</span>
<span class="co">#&gt; ● port: 610712</span></code></pre></div>
<p>Then, in the client machine navigate a web browser to the server’s host name or IP address and use the port number printed above, e.g. <code>https://mycomputer:61072</code>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h2>
<p>For old versions of <code>proffer</code> (0.0.2 and below) refer to <a href="https://github.com/r-prof/proffer/blob/f76bde56796396e83fee00f94430c94974f18303/README.md#installation" class="external-link">these older installation instructions</a> instead of the ones below.</p>
<div id="the-r-package" class="section level3">
<h3 class="hasAnchor">
<a href="#the-r-package" class="anchor" aria-hidden="true"></a>The R package</h3>
<p>The latest release of <code>proffer</code> is available on <a href="https://CRAN.R-project.org" class="external-link">CRAN</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"proffer"</span><span class="op">)</span></code></pre></div>
<p>Alternatively, you can install the development version from GitHub.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"r-prof/proffer"</span><span class="op">)</span></code></pre></div>
<p>The <code>proffer</code> package requires the <code>RProtoBuf</code> package, which may require installation of additional system dependencies on Linux. See its <a href="https://github.com/eddelbuettel/rprotobuf#installation" class="external-link">installation instructions</a>.</p>
</div>
<div id="non-r-dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#non-r-dependencies" class="anchor" aria-hidden="true"></a>Non-R dependencies</h3>
<p><code>proffer</code> requires</p>
<ol style="list-style-type: decimal">
<li>Go: <a href="https://golang.org/doc/install" class="external-link uri">https://golang.org/doc/install</a>
</li>
<li>Graphviz: <a href="https://www.graphviz.org/download" class="external-link uri">https://www.graphviz.org/download</a>
</li>
<li>
<code>pprof</code>: <a href="https://github.com/google/pprof" class="external-link uri">https://github.com/google/pprof</a> (already comes with Go)</li>
</ol>
<p><code>pprof</code> itself is already installed with Go. We highly recommend you use Go’s default copy of <code>pprof</code> because <a href="https://github.com/r-prof/proffer/issues/27" class="external-link">compatibility issues</a> could arise if you install the latest <code>pprof</code> manually.</p>
<p>Mac and Windows installers of Go and Graphviz are available at the links above. On Linux, you can install Go (and thus <code>pprof</code>) directly from R:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-prof/proffer" class="external-link">proffer</a></span><span class="op">)</span>
<span class="fu"><a href="reference/install_go.html">install_go</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Also installs pprof if on Linux.</span></code></pre></div>
</div>
<div id="configuration" class="section level3">
<h3 class="hasAnchor">
<a href="#configuration" class="anchor" aria-hidden="true"></a>Configuration</h3>
<p>First, run <code><a href="reference/pprof_sitrep.html">pprof_sitrep()</a></code> to see if <code>proffer</code> can already find all the required non-R dependencies. Then, run <code><a href="reference/test_pprof.html">test_pprof()</a></code> to see if <code>pprof</code> actually works for you. If both checks pass, you are done with installation.</p>
<p>Otherwise, open your your <code>.Renviron</code> file and define special environment variables that point to system dependencies. The <a href="https://usethis.r-lib.org/reference/edit.html" class="external-link"><code>edit_r_environ()</code></a> function in the <a href="https://usethis.r-lib.org" class="external-link"><code>usethis</code></a> package can help you. Configuration varies according to your platform and installation method.</p>
<div id="linux" class="section level4">
<h4 class="hasAnchor">
<a href="#linux" class="anchor" aria-hidden="true"></a>Linux</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>PROFFER_PPROF_BIN=<span class="er">/</span>home<span class="op">/</span>YOU<span class="op">/</span>go<span class="op">/</span>pkg<span class="op">/</span>tool<span class="op">/</span>linux_amd64<span class="op">/</span>pprof</span>
<span id="cb9-2"><a href="#cb9-2"></a>PROFFER_GO_BIN=<span class="er">/</span>home<span class="op">/</span>YOU<span class="op">/</span>go<span class="op">/</span>bin<span class="op">/</span>go</span>
<span id="cb9-3"><a href="#cb9-3"></a>PROFFER_GRAPHVIZ_BIN=<span class="er">/</span>usr<span class="op">/</span>bin<span class="op">/</span>dot</span></code></pre></div>
</div>
<div id="mac-os" class="section level4">
<h4 class="hasAnchor">
<a href="#mac-os" class="anchor" aria-hidden="true"></a>Mac OS</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>PROFFER_PPROF_BIN=<span class="er">/</span>usr<span class="op">/</span>local<span class="op">/</span>bin<span class="op">/</span>pprof</span>
<span id="cb10-2"><a href="#cb10-2"></a>PROFFER_GO_BIN=<span class="er">/</span>usr<span class="op">/</span>local<span class="op">/</span>bin<span class="op">/</span>go</span>
<span id="cb10-3"><a href="#cb10-3"></a>PROFFER_GRAPHVIZ_BIN=<span class="er">/</span>usr<span class="op">/</span>local<span class="op">/</span>bin<span class="op">/</span>dot</span></code></pre></div>
</div>
<div id="windows" class="section level4">
<h4 class="hasAnchor">
<a href="#windows" class="anchor" aria-hidden="true"></a>Windows</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>PROFFER_PPROF_BIN=C<span class="op">:</span>\Go\pkg\tool\windows_amd64\pprof.exe</span>
<span id="cb11-2"><a href="#cb11-2"></a>PROFFER_GO_BIN=C<span class="op">:</span>\Go\bin\go.exe</span>
<span id="cb11-3"><a href="#cb11-3"></a>PROFFER_GRAPHVIZ_BIN=<span class="st">"C:\Program Files (x86)\Graphviz2.38</span><span class="ch">\b</span><span class="st">in\dot.exe"</span></span></code></pre></div>
</div>
</div>
<div id="verification" class="section level3">
<h3 class="hasAnchor">
<a href="#verification" class="anchor" aria-hidden="true"></a>Verification</h3>
<p>Run <code><a href="reference/pprof_sitrep.html">pprof_sitrep()</a></code> again to verify that everything is installed and configured correctly.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-prof/proffer" class="external-link">proffer</a></span><span class="op">)</span>
<span class="fu"><a href="reference/pprof_sitrep.html">pprof_sitrep</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; ● Call test_pprof() to test installation.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Requirements ────────────────────────────────────────────────────────────────</span>
<span class="co">#&gt; ✓ pprof /Users/c240390/go/bin/pprof</span>
<span class="co">#&gt; ✓ Graphviz /usr/local/bin/dot</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Go ──────────────────────────────────────────────────────────────────────────</span>
<span class="co">#&gt; ✓ Go binary /usr/local/bin/go</span>
<span class="co">#&gt; ✓ Go folder /Users/c240390/go</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Custom ──────────────────────────────────────────────────────────────────────</span>
<span class="co">#&gt; ✓ `PROFFER_PPROF_BIN` /Users/c240390/go/bin/pprof</span>
<span class="co">#&gt; ✓ `PROFFER_GO_BIN` /usr/local/bin/go</span>
<span class="co">#&gt; ✓ `PROFFER_GRAPHVIZ_BIN` /usr/local/bin/dot</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── System ──────────────────────────────────────────────────────────────────────</span>
<span class="co">#&gt; ✓ pprof system path /Users/c240390/go/bin/pprof</span>
<span class="co">#&gt; ✓ Go binary system path /usr/local/bin//go</span>
<span class="co">#&gt; ✓ Graphviz system path /usr/local/bin//dot</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── Deprecated ──────────────────────────────────────────────────────────────────</span>
<span class="co">#&gt; ✓ `pprof_path` env variable omitted.</span></code></pre></div>
<p>If all dependencies are accounted for, <code>proffer</code> should work. Test it out with <code><a href="reference/test_pprof.html">test_pprof()</a></code>. On a local machine, it should launch a browser window showing an instance of <code>pprof</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-prof/proffer" class="external-link">proffer</a></span><span class="op">)</span>
<span class="fu"><a href="reference/test_pprof.html">test_pprof</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor" aria-hidden="true"></a>Contributing</h2>
<p>We encourage participation through <a href="https://github.com/r-prof/proffer/issues" class="external-link">issues</a> and <a href="https://github.com/r-prof/proffer/pulls" class="external-link">pull requests</a>. <code>proffer</code> has a <a href="https://github.com/r-prof/proffer/blob/main/CODE_OF_CONDUCT.md" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div id="resources" class="section level2">
<h2 class="hasAnchor">
<a href="#resources" class="anchor" aria-hidden="true"></a>Resources</h2>
<p>Profilers identify bottlenecks, but the do not offer solutions. It helps to learn about fast code in general so you can think of efficient alternatives to try.</p>
<ul>
<li><a href="http://adv-r.had.co.nz/Performance.html" class="external-link uri">http://adv-r.had.co.nz/Performance.html</a></li>
<li><a href="https://www.r-bloggers.com/strategies-to-speedup-r-code/" class="external-link uri">https://www.r-bloggers.com/strategies-to-speedup-r-code/</a></li>
<li><a href="https://www.r-bloggers.com/faster-higher-stonger-a-guide-to-speeding-up-r-code-for-busy-people/" class="external-link uri">https://www.r-bloggers.com/faster-higher-stonger-a-guide-to-speeding-up-r-code-for-busy-people/</a></li>
<li><a href="https://cran.r-project.org/package=data.table/vignettes/datatable-intro.html" class="external-link uri">https://cran.r-project.org/package=data.table/vignettes/datatable-intro.html</a></li>
</ul>
</div>
<div id="similar-work" class="section level2">
<h2 class="hasAnchor">
<a href="#similar-work" class="anchor" aria-hidden="true"></a>Similar work</h2>
<div id="profvis" class="section level3">
<h3 class="hasAnchor">
<a href="#profvis" class="anchor" aria-hidden="true"></a>profvis</h3>
<p>The <a href="https://github.com/rstudio/profvis" class="external-link"><code>profvis</code></a> is much easier to install than <code>proffer</code> and equally easy to invoke.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">profvis</span><span class="op">)</span>
<span class="fu">profvis</span><span class="op">(</span><span class="op">{</span>
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e5</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
  <span class="op">}</span>
  <span class="va">x</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>However, <code>profvis</code>-generated flame graphs can be <a href="https://github.com/rstudio/profvis/issues/115" class="external-link">difficult to read</a> and <a href="https://github.com/rstudio/profvis/issues/104" class="external-link">slow to respond to mouse clicks</a>.</p>
<center>
<p><a href="https://r-prof.github.io/proffer/reference/figures/profvis.png" class="external-link"> <img src="https://r-prof.github.io/proffer/reference/figures/profvis.png" alt="top" align="center" style="border: none; float: center;"></a></p>
</center>
<p><code>proffer</code> uses <a href="https://github.com/google/pprof" class="external-link"><code>pprof</code></a> to create friendlier, faster visualizations.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=proffer">https://​cloud.r-project.org/​package=proffer</a>
</li>
<li>Browse source code at <br><a href="https://github.com/r-prof/proffer/">https://​github.com/​r-prof/​proffer/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/r-prof/proffer/issues">https://​github.com/​r-prof/​proffer/​issues</a>
</li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>William Michael Landau <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1878-3253" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More on authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=proffer" class="external-link"><img src="https://www.r-pkg.org/badges/version/proffer" alt="CRAN"></a></li>
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/licence-MIT-blue.svg" alt="license"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="active"></a></li>
<li><a href="https://github.com/r-prof/proffer/actions?workflow=check" class="external-link"><img src="https://github.com/r-prof/proffer/workflows/check/badge.svg" alt="check"></a></li>
<li><a href="https://codecov.io/github/r-prof/proffer?branch=main" class="external-link"><img src="https://codecov.io/github/r-prof/proffer/coverage.svg?branch=main" alt="codecov"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
